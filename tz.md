# Тестовое задание: Сервис управления личными задачами (Task Management API)

## Цель

Реализовать REST API для управления списком личных задач с системой категорий и базовой фильтрацией.

## Технологический стек

- **Framework**: NestJS (TypeScript)
- **Database**: PostgreSQL  
  (использовать TypeORM **или** Prisma)
- **Validation**: class-validator + class-transformer
- **Containerization**: Docker + Docker Compose (для базы данных и приложения)

## Функциональные требования

### Сущность Task (задача)

**Поля:**

- `id` — number (автоинкремент / uuid)
- `title` — string (обязательное)
- `description` — text (опционально)
- `status` — enum: `todo` | `in_progress` | `done`
- `priority` — integer (1–5)
- `createdAt` — timestamp
- `updatedAt` — timestamp

**Связь:**  
Каждая задача **обязательно** привязана к одной категории (Many-to-One).

### Сущность Category (категория)

**Поля:**

- `id` — number (автоинкремент / uuid)
- `name` — string (уникальное)

### Эндпоинты

#### Задачи (Tasks)

- `POST   /tasks`          — создание задачи  
- `GET    /tasks`          — список задач (с фильтрацией и пагинацией)  
- `GET    /tasks/:id`      — получение одной задачи  
- `PATCH  /tasks/:id`      — частичное обновление задачи  
- `DELETE /tasks/:id`      — удаление задачи

#### Категории (Categories)

- `POST   /categories`     — создание категории  
- `GET    /categories`     — список всех категорий

#### Фильтрация и поиск (GET /tasks)

Поддерживаемые query-параметры:

- `status`       — фильтр по статусу (`todo`, `in_progress`, `done`)
- `priority`     — точное совпадение приоритета (1–5)
- `search`       — поиск по подстроке в поле `title` (case-insensitive)
- `limit`        — количество записей на странице (по умолчанию 20)
- `offset`       — смещение (по умолчанию 0)

### Бизнес-логика

1. При создании задачи, если поле `priority` **не указано** → установить значение **по умолчанию = 3**
2. **Запрет удаления категории**, если к ней привязана хотя бы одна задача со статусом **отличным от `done`**

## Технические требования (оцениваемые аспекты)

- Правильное разделение ответственности:  
  контроллеры → сервисы → репозитории / prisma / typeorm  
- Использование **DTO** для валидации входящих данных  
- Type-safe сущности / response-типы  
- Корректная обработка ошибок через `HttpException` (или `BadRequestException`, `NotFoundException` и т.д.)  
- Использование модуля `@nestjs/config` + `.env` файл  
- Наличие **миграций** базы данных  
- Чистый, читаемый код, соблюдение принципов DRY и SOLID

## Будет большим плюсом

- 1–2 **unit-теста** на бизнес-логику сервиса (jest)
- Автогенерируемая **Swagger-документация** (`@nestjs/swagger`)
- Простой логгер запросов (например, через middleware или встроенный Logger)

## Формат сдачи

1. Публичный репозиторий (GitHub / GitLab / Bitbucket)
2. В README.md должна быть подробная инструкция по запуску:
   - `docker-compose up` — поднимает всё окружение (приложение + postgres)
   - желательно указать, как запустить без docker (если есть)
3. Файл с примерами запросов:
   - Postman collection (`*.json`)  
   - **или** `.http` / `.rest` файл (VS Code REST Client)

Удачи!
